import _ from'jalaali-js';import {forwardRef,useState,useEffect,useMemo,useImperativeHandle,useCallback}from'react';import {clsx}from'clsx';import {twMerge}from'tailwind-merge';import {Slot}from'@radix-ui/react-slot';import {cva}from'class-variance-authority';import {jsxs,jsx}from'react/jsx-runtime';import*as n from'@radix-ui/react-select';import {ChevronRight,ChevronLeft,ChevronUp,ChevronDown,ChevronDownIcon,CheckIcon,XIcon,ChevronUpIcon}from'lucide-react';import*as p from'@radix-ui/react-dialog';var ot=Object.defineProperty,rt=Object.defineProperties;var it=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var De=(t,a,o)=>a in t?ot(t,a,{enumerable:true,configurable:true,writable:true,value:o}):t[a]=o,l=(t,a)=>{for(var o in a||(a={}))Ce.call(a,o)&&De(t,o,a[o]);if(X)for(var o of X(a))ke.call(a,o)&&De(t,o,a[o]);return t},N=(t,a)=>rt(t,it(a));var c=(t,a)=>{var o={};for(var r in t)Ce.call(t,r)&&a.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&X)for(var r of X(t))a.indexOf(r)<0&&ke.call(t,r)&&(o[r]=t[r]);return o};function Ne(t){let{jy:a,jm:o,jd:r}=_.toJalaali(t);return `${a}/${o.toString().padStart(2,"0")}/${r.toString().padStart(2,"0")}`}function R(t,a,o){let{gy:r,gm:f,gd:v}=_.toGregorian(t,a,o);return new Date(r,f-1,v)}function ze(t,a){return _.jalaaliMonthLength(t,a)}function Re(t,a){let{gy:o,gm:r,gd:f}=_.toGregorian(t,a,1);return new Date(o,r-1,f).getDay()}function B(t){return _.toJalaali(t)}var Ie=["\u0634","\u06CC","\u062F","\u0633","\u0686","\u067E","\u062C"],Te=["\u0641\u0631\u0648\u0631\u062F\u06CC\u0646","\u0627\u0631\u062F\u06CC\u0628\u0647\u0634\u062A","\u062E\u0631\u062F\u0627\u062F","\u062A\u06CC\u0631","\u0645\u0631\u062F\u0627\u062F","\u0634\u0647\u0631\u06CC\u0648\u0631","\u0645\u0647\u0631","\u0622\u0628\u0627\u0646","\u0622\u0630\u0631","\u062F\u06CC","\u0628\u0647\u0645\u0646","\u0627\u0633\u0641\u0646\u062F"];function d(...t){return twMerge(clsx(t))}var dt=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function S(v){var H=v,{className:t,variant:a,size:o,asChild:r=false}=H,f=c(H,["className","variant","size","asChild"]);return jsx(r?Slot:"button",l({"data-slot":"button",className:d(dt({variant:a,size:o,className:t}))},f))}function Me(a){var t=c(a,[]);return jsx(n.Root,l({"data-slot":"select"},t))}function Be(a){var t=c(a,[]);return jsx(n.Value,l({"data-slot":"select-value"},t))}function Je(f){var v=f,{className:t,size:a="default",children:o}=v,r=c(v,["className","size","children"]);return jsxs(n.Trigger,N(l({"data-slot":"select-trigger","data-size":a,className:d("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t)},r),{children:[o,jsx(n.Icon,{asChild:true,children:jsx(ChevronDownIcon,{className:"size-4 opacity-50"})})]}))}function Ve(f){var v=f,{className:t,children:a,position:o="popper"}=v,r=c(v,["className","children","position"]);return jsx(n.Portal,{children:jsxs(n.Content,N(l({"data-slot":"select-content",className:d("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o},r),{children:[jsx(ft,{}),jsx(n.Viewport,{className:d("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),jsx(gt,{})]}))})}function _e(r){var f=r,{className:t,children:a}=f,o=c(f,["className","children"]);return jsxs(n.Item,N(l({"data-slot":"select-item",className:d("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t)},o),{children:[jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:jsx(n.ItemIndicator,{children:jsx(CheckIcon,{className:"size-4"})})}),jsx(n.ItemText,{children:a})]}))}function ft(o){var r=o,{className:t}=r,a=c(r,["className"]);return jsx(n.ScrollUpButton,N(l({"data-slot":"select-scroll-up-button",className:d("flex cursor-default items-center justify-center py-1",t)},a),{children:jsx(ChevronUpIcon,{className:"size-4"})}))}function gt(o){var r=o,{className:t}=r,a=c(r,["className"]);return jsx(n.ScrollDownButton,N(l({"data-slot":"select-scroll-down-button",className:d("flex cursor-default items-center justify-center py-1",t)},a),{children:jsx(ChevronDownIcon,{className:"size-4"})}))}function Ae(a){var t=c(a,[]);return jsx(p.Root,l({"data-slot":"sheet"},t))}function He(a){var t=c(a,[]);return jsx(p.Trigger,l({"data-slot":"sheet-trigger"},t))}function ht(a){var t=c(a,[]);return jsx(p.Portal,l({"data-slot":"sheet-portal"},t))}function bt(o){var r=o,{className:t}=r,a=c(r,["className"]);return jsx(p.Overlay,l({"data-slot":"sheet-overlay",className:d("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t)},a))}function Oe(f){var v=f,{className:t,children:a,side:o="right"}=v,r=c(v,["className","children","side"]);return jsxs(ht,{children:[jsx(bt,{}),jsxs(p.Content,N(l({"data-slot":"sheet-content",className:d("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",o==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",o==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",o==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",o==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t)},r),{children:[a,jsxs(p.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[jsx(XIcon,{className:"size-4"}),jsx("span",{className:"sr-only",children:"Close"})]})]}))]})}function Fe(o){var r=o,{className:t}=r,a=c(r,["className"]);return jsx("div",l({"data-slot":"sheet-header",className:d("flex flex-col gap-1.5 p-4",t)},a))}function Ue(o){var r=o,{className:t}=r,a=c(r,["className"]);return jsx(p.Title,l({"data-slot":"sheet-title",className:d("text-foreground font-semibold",t)},a))}function Ge(o){var r=o,{className:t}=r,a=c(r,["className"]);return jsx(p.Description,l({"data-slot":"sheet-description",className:d("text-muted-foreground text-sm",t)},a))}var Le=forwardRef(({className:t,defaultValue:a=new Date,value:o,minDate:r,maxDate:f,disablePast:v=false,disableFuture:H=false,minuteStep:q=1,disabled:me=false,showTime:D=true,format:$e="jalali",clearable:Ee=false,inline:Q=false,trigger:Z,formatLabel:ue,onChange:O,onOpenChange:ee,onClear:F,inputRef:C,placeholderLabel:te},We)=>{let ae=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate()),U=ae(new Date),oe=ae(r!=null?r:new Date(1970,0,1)),re=ae(f!=null?f:new Date(2100,11,31)),P=v?oe>U?oe:U:oe,w=H?re<U?re:U:re,ie=o!=null?o:a,{jy:Ye,jm:Ke,jd:Xe}=B(ie),[qe,pe]=useState(false),[x,J]=useState(Ye),[b,I]=useState(Ke),[T,G]=useState(Xe),[L,$]=useState(ie.getHours()),[E,W]=useState(ie.getMinutes()),[k,ne]=useState(null),[Y,fe]=useState(null);useEffect(()=>{if(!o)return;let{jy:e,jm:g,jd:s}=B(o);J(e),I(g),G(s),$(o.getHours()),W(o.getMinutes()),ne(o);},[o]);let{weeks:Qe,daysFlat:V,canPrevMonth:ge,canNextMonth:ve}=useMemo(()=>{let e=ze(x,b),g=(Re(x,b)+1)%7,s=Array.from({length:42},(m,M)=>{let se=M-g+1;return se>0&&se<=e?se:null});return {weeks:Array.from({length:6},(m,M)=>s.slice(M*7,M*7+7)),daysFlat:s.map(m=>m!=null?m:-1),canPrevMonth:R(x,b,1)>P,canNextMonth:R(x,b,e)<w}},[x,b,P,w]),j=useMemo(()=>{let e=R(x,b,T);return e.setHours(D?L:0),e.setMinutes(D?E:0),e},[x,b,T,L,E,D]);useImperativeHandle(We,()=>({getValue:()=>k}),[k]);let Ze=useMemo(()=>{let e=B(P).jy,g=B(w).jy;return Array.from({length:g-e+1},(s,m)=>e+m)},[P,w]),he=useCallback(e=>{let g=R(x,b,e);return g<P||g>w},[x,b,P,w]),et=k?ue?ue(k):(e=>$e==="gregorian"?e.toLocaleDateString("fa-IR",{year:"numeric",month:"2-digit",day:"2-digit"}):Ne(e))(k):void 0,K=useCallback(e=>{let s=V.findIndex(M=>M===T)+e;for(;s>=0&&s<V.length&&V[s]===-1;)s+=e>0?1:-1;let m=V[s];m!==void 0&&m!==-1&&G(m);},[V,T]),be=useCallback(()=>{var e;if(j<P||j>w){fe("\u062A\u0627\u0631\u06CC\u062E \u062E\u0627\u0631\u062C \u0627\u0632 \u0645\u062D\u062F\u0648\u062F\u0647 \u0645\u062C\u0627\u0632 \u0627\u0633\u062A");return}fe(null),ne(j),Q||pe(false),O==null||O(j),(e=C==null?void 0:C.current)==null||e.setAttribute("value",j.toISOString());},[j,Q,P,w,O,C]),tt=useCallback(()=>{var e;F==null||F(k),ne(null),(e=C==null?void 0:C.current)==null||e.setAttribute("value","");},[F,k,C]),Se=useCallback(e=>{let{jy:g,jm:s,jd:m}=B(e);J(g),I(s),G(m),$(e.getHours()),W(e.getMinutes());},[]),xe=jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[jsxs("div",{className:"flex items-center gap-2",children:[jsx(S,{size:"icon",variant:"ghost",onClick:()=>ve&&(b===12?(I(1),J(e=>e+1)):I(e=>e+1)),disabled:!ve,"aria-label":"\u0645\u0627\u0647 \u0628\u0639\u062F",children:jsx(ChevronRight,{className:"w-4 h-4"})}),jsx("div",{className:"font-semibold w-24 text-center",children:Te[b-1]}),jsx(S,{size:"icon",variant:"ghost",onClick:()=>ge&&(b===1?(I(12),J(e=>e-1)):I(e=>e-1)),disabled:!ge,"aria-label":"\u0645\u0627\u0647 \u0642\u0628\u0644",children:jsx(ChevronLeft,{className:"w-4 h-4"})})]}),jsxs(Me,{value:x.toString(),onValueChange:e=>J(+e),children:[jsx(Je,{className:"w-[96px]",children:jsx(Be,{placeholder:"\u0633\u0627\u0644"})}),jsx(Ve,{children:Ze.map(e=>jsx(_e,{value:e.toString(),disabled:R(e,12,29)<P||R(e,1,1)>w,children:e},e))})]})]}),ye=jsx("div",{onKeyDown:e=>{switch(e.key){case "ArrowLeft":K(-1),e.preventDefault();break;case "ArrowRight":K(1),e.preventDefault();break;case "ArrowUp":K(-7),e.preventDefault();break;case "ArrowDown":K(7),e.preventDefault();break;case "Enter":be(),e.preventDefault();break}},children:jsxs("table",{className:"w-full",children:[jsx("thead",{children:jsx("tr",{children:Ie.map(e=>jsx("th",{className:"text-center text-sm font-medium text-muted-foreground",children:e},e))})}),jsx("tbody",{children:Qe.map((e,g)=>jsx("tr",{children:e.map((s,m)=>jsx("td",{className:"p-0",children:s?jsx(S,{size:"sm",className:"w-full hover:ring ring-primary/40",variant:s===T?"default":"ghost",onClick:()=>!he(s)&&G(s),disabled:he(s),"aria-selected":s===T,children:s}):jsx("span",{className:"inline-block h-9 w-full"})},m))},g))})]})}),Pe=D&&jsx("div",{className:"flex gap-6 justify-center mt-2",children:[{label:"\u0633\u0627\u0639\u062A",value:L,inc:()=>$(e=>(e+1)%24),dec:()=>$(e=>(e+23)%24)},{label:"\u062F\u0642\u06CC\u0642\u0647",value:E,inc:()=>W(e=>(e+q)%60),dec:()=>W(e=>(e-q+60*60)%60)}].map(({label:e,value:g,inc:s,dec:m})=>jsxs("div",{className:"flex flex-col items-center",children:[jsx("span",{className:"text-sm mb-1",children:e}),jsxs("div",{className:"flex items-center gap-1",children:[jsx(S,{size:"icon",variant:"ghost",onClick:s,children:jsx(ChevronUp,{className:"h-3.5 w-3.5"})}),jsx("span",{className:"w-10 text-center",children:g.toString().padStart(2,"0")}),jsx(S,{size:"icon",variant:"ghost",onClick:m,children:jsx(ChevronDown,{className:"h-3.5 w-3.5"})})]})]},e))}),we=jsxs("div",{className:"flex gap-2 mt-4",children:[jsx(S,{variant:"secondary",onClick:()=>Se(new Date),children:"\u0627\u0644\u0627\u0646"}),jsx(S,{variant:"secondary",onClick:()=>{let e=new Date;e.setDate(e.getDate()+1),Se(e);},children:"\u0641\u0631\u062F\u0627"}),Ee&&jsx(S,{variant:"outline",onClick:tt,children:"\u067E\u0627\u06A9 \u06A9\u0631\u062F\u0646"}),jsx(S,{onClick:be,children:"\u062B\u0628\u062A"})]}),at=te!=null?te:D?"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646":"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0627\u0631\u06CC\u062E";return Q?jsxs("div",{className:d("p-4 space-y-4 border rounded-lg bg-background max-w-md mx-auto",t),children:[xe,ye,Pe,we,Y&&jsx("p",{className:"text-sm text-destructive text-center mt-2",children:Y})]}):jsxs(Ae,{open:qe,onOpenChange:e=>{me||(pe(e),ee==null||ee(e));},children:[jsx(He,{asChild:true,className:"w-fit",children:Z!=null?Z:jsx(S,{variant:"outline",disabled:me,children:k?jsxs("span",{className:"text-sm text-muted-foreground",children:[D?`${L.toString().padStart(2,"0")}:${E.toString().padStart(2,"0")} - `:"",et]}):at})}),jsxs(Oe,{side:"bottom",className:d("max-w-md mx-auto",t),children:[jsxs(Fe,{className:"text-center",children:[jsx(Ue,{children:D?"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646":"\u0627\u0646\u062A\u062E\u0627\u0628 \u062A\u0627\u0631\u06CC\u062E"}),jsx(Ge,{children:D?"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F":"\u062A\u0627\u0631\u06CC\u062E \u0631\u0627 \u0627\u0646\u062A\u062E\u0627\u0628 \u06A9\u0646\u06CC\u062F"})]}),jsxs("div",{className:"p-4 space-y-4",children:[xe,ye,Pe,we,Y&&jsx("p",{className:"text-sm text-destructive text-center mt-2",children:Y})]})]})]})});Le.displayName="JalaaliDateTimePicker";export{Le as JalaaliDateTimePicker};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map